(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29b20f0a"],{"159b":function(t,e,a){var s=a("da84"),r=a("fdbc"),i=a("17c2"),o=a("9112");for(var n in r){var c=s[n],l=c&&c.prototype;if(l&&l.forEach!==i)try{o(l,"forEach",i)}catch(u){l.forEach=i}}},"17c2":function(t,e,a){"use strict";var s=a("b727").forEach,r=a("a640"),i=a("ae40"),o=r("forEach"),n=i("forEach");t.exports=o&&n?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},2355:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cart"},[a("div",{staticClass:"main-content"},[a("div",{staticClass:"container"},[[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-7 mb-5"},[a("div",{staticClass:"row justify-content-between"},[t._m(0),t.shopCart.length?a("div",{staticClass:"col-6 text-right"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.deleteCartAll()}}},[t._v("清空購物車")])]):t._e()]),a("table",{staticClass:"table1 mb-3"},[t._m(1),t._l(t.shopCart,(function(e,s){return[a("tr",{key:"cart"+s},[a("td",[t._v(t._s(e.product.title))]),a("td",[a("div",{staticClass:"qty"},[a("input",{staticClass:"form-control count",attrs:{type:"number",name:"qty",step:"1"},domProps:{value:e.quantity},on:{input:function(a){return t.editCart(e.product.id,a.target.value)}}})])]),a("td",{staticClass:"text-right"},[t._v(t._s(e.product.price))]),a("td",{staticClass:"text-right"},[t._v(t._s(e.product.price*e.quantity))]),a("td",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-danger",on:{click:function(a){return t.deleteCartItem(e.product.id)}}},[a("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})])])])]})),t.shopCart.length?[a("tr",{staticClass:"text-h3"},[a("td",[t._v("總計")]),a("td"),a("td"),a("td",{staticClass:"text-right"},[t._v(t._s(t.total))]),a("td")])]:[a("tr",[a("td",{staticClass:"text-center p-2",attrs:{colspan:"5"}},[a("div",{staticClass:"mb-2"},[t._v("購物車尚無商品")]),a("router-link",{staticClass:"more-btn more-btn--s m-auto",attrs:{to:"/products"}},[t._v("來去看看")])],1)])]],2)]),a("div",{staticClass:"col-lg-1"}),a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"form-wrap"},[t._m(2),a("validation-observer",{ref:"observer",scopedSlots:t._u([{key:"default",fn:function(e){var s=e.invalid,r=e.handleSubmit;return[a("form",{staticClass:"form mt-4",attrs:{action:""},on:{submit:function(e){return e.preventDefault(),r(t.sendOrderApi)}}},[a("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes;return[a("h3",[t._v("收件人姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.name,expression:"customer.name"}],staticClass:"form-control",class:r,attrs:{name:"收件人姓名"},domProps:{value:t.customer.name},on:{input:function(e){e.target.composing||t.$set(t.customer,"name",e.target.value)}}}),a("span",{class:r},[t._v(t._s(s[0]))])]}}],null,!0)}),a("validation-provider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes;return[a("h3",[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.email,expression:"customer.email"}],staticClass:"form-control",class:r,attrs:{type:"email",name:"email"},domProps:{value:t.customer.email},on:{input:function(e){e.target.composing||t.$set(t.customer,"email",e.target.value)}}}),a("span",{class:r},[t._v(t._s(s[0]))])]}}],null,!0)}),a("validation-provider",{attrs:{rules:"required|min:8"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes;return[a("h3",[t._v("電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.tel,expression:"customer.tel"}],staticClass:"form-control",class:r,attrs:{name:"電話"},domProps:{value:t.customer.tel},on:{input:function(e){e.target.composing||t.$set(t.customer,"tel",e.target.value)}}}),a("span",{class:r},[t._v(t._s(s[0]))])]}}],null,!0)}),a("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes;return[a("h3",[t._v("地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.address,expression:"customer.address"}],staticClass:"form-control",class:r,attrs:{name:"地址"},domProps:{value:t.customer.address},on:{input:function(e){e.target.composing||t.$set(t.customer,"address",e.target.value)}}}),a("span",{class:r},[t._v(t._s(s[0]))])]}}],null,!0)}),a("div",{staticClass:"form-item"},[a("h3",[t._v("付款方式")]),a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.customer.payment,expression:"customer.payment"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.customer,"payment",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"WebATM"}},[t._v("WebATM")]),a("option",{attrs:{value:"ATM"}},[t._v("ATM")]),a("option",{attrs:{value:"CVS"}},[t._v("CVS")]),a("option",{attrs:{value:"Barcode"}},[t._v("Barcode")]),a("option",{attrs:{value:"Credit"}},[t._v("Credit")]),a("option",{attrs:{value:"ApplePay"}},[t._v("ApplePay")]),a("option",{attrs:{value:"GooglePay"}},[t._v("GooglePay")])])])]),a("div",{staticClass:"form-item"},[a("h3",[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.customer.message,expression:"customer.message"}],staticClass:"form-control",attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:t.customer.message},on:{input:function(e){e.target.composing||t.$set(t.customer,"message",e.target.value)}}})]),a("br"),a("input",{staticClass:"more-btn w-100",attrs:{disabled:s||!t.shopCart.length||t.$parent.isLoading,type:"submit",value:"確認訂購"}})],1)]}}])})],1)])])]],2),a("div",{staticClass:"modal fade bd-example-modal-lg",attrs:{id:"messageModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-sm modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(3),a("div",{staticClass:"modal-body"},[t._v(" "+t._s(t.messageText)+" ")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.closeMessage()}}},[t._v("OK")])])])])])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6"},[a("h3",[t._v("購物明細")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{attrs:{width:"30%"}},[t._v("品名")]),a("th",{attrs:{width:"80px"}},[t._v("數量")]),a("th",{staticClass:"text-right"},[t._v("價格")]),a("th",{staticClass:"text-right"},[t._v("小計")]),a("th",{attrs:{width:"80px"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",[t._v("寄件資料")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLongTitle"}},[t._v(" 系統訊息 ")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],i=(a("99af"),a("4160"),a("159b"),"".concat("https://course-ec-api.hexschool.io/api/").concat("31e50ae2-761f-42e4-b9da-0c081fdb851d","/ec/shopping")),o="".concat("https://course-ec-api.hexschool.io/api/").concat("31e50ae2-761f-42e4-b9da-0c081fdb851d","/ec/shopping/all/product"),n="".concat("https://course-ec-api.hexschool.io/api/").concat("31e50ae2-761f-42e4-b9da-0c081fdb851d","/ec/orders"),c={name:"Cart",components:{},data:function(){return{shopCart:[],initCustomer:{name:"",email:"",tel:"",address:"",payment:"WebATM",message:""},customer:{name:"",email:"",tel:"",address:"",payment:"WebATM",message:""},messageModelOpen:!1,messageText:""}},computed:{total:function(){var t=0;return this.shopCart.forEach((function(e){t+=e.product.price*e.quantity})),t}},created:function(){var t=this;this.$bus.$on("updateCart",(function(){t.getShopCartApi()}))},mounted:function(){this.getShopCartApi()},methods:{openMessage:function(t){this.messageText=t,$("#messageModal").modal("show"),this.messageModelOpen=!0},closeMessage:function(){this.messageText="",$("#messageModal").modal("hide"),this.messageModelOpen=!1},sendOrderApi:function(){var t=this;this.$parent.isLoading=!0,this.$http.post(n,this.customer).then((function(){t.getShopCartApi(),t.shopCart=[],t.$parent.isLoading=!1,t.openMessage("已收到您的訂單!"),t.customer=Object.assign({},t.initCustomer),t.$refs.observer.reset()}))},getShopCartApi:function(){var t=this;this.$parent.isLoading=!0,this.$http.get(i).then((function(e){t.shopCart=e.data.data,t.$parent.isLoading=!1,t.$bus.$emit("updateMiniCart",t.shopCart)}))},deleteCartAll:function(){var t=this;this.$parent.isLoading=!0,this.$http.delete(o).then((function(e){t.shopCart=e.data.data,t.getShopCartApi(),t.$parent.isLoading=!1}))},deleteCartItem:function(t){var e=this;this.$parent.isLoading=!0,this.$http.delete("".concat(i,"/").concat(t)).then((function(){e.getShopCartApi(),e.$parent.isLoading=!1}))},editCart:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$parent.isLoading=!0;var s={product:t,quantity:a};this.$http.patch(i,s).then((function(){e.getShopCartApi(),e.$parent.isLoading=!1}))}}},l=c,u=a("2877"),d=Object(u["a"])(l,s,r,!1,null,null,null);e["default"]=d.exports},4160:function(t,e,a){"use strict";var s=a("23e7"),r=a("17c2");s({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},a640:function(t,e,a){"use strict";var s=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&s((function(){a.call(null,e||function(){throw 1},1)}))}},ae40:function(t,e,a){var s=a("83ab"),r=a("d039"),i=a("5135"),o=Object.defineProperty,n={},c=function(t){throw t};t.exports=function(t,e){if(i(n,t))return n[t];e||(e={});var a=[][t],l=!!i(e,"ACCESSORS")&&e.ACCESSORS,u=i(e,0)?e[0]:c,d=i(e,1)?e[1]:void 0;return n[t]=!!a&&!r((function(){if(l&&!s)return!0;var t={length:-1};l?o(t,1,{enumerable:!0,get:c}):t[1]=1,a.call(t,u,d)}))}},b727:function(t,e,a){var s=a("0366"),r=a("44ad"),i=a("7b0b"),o=a("50c4"),n=a("65f0"),c=[].push,l=function(t){var e=1==t,a=2==t,l=3==t,u=4==t,d=6==t,m=5==t||d;return function(p,v,f,h){for(var g,C,_=i(p),b=r(_),y=s(v,f,3),S=o(b.length),L=0,x=h||n,$=e?x(p,S):a?x(p,0):void 0;S>L;L++)if((m||L in b)&&(g=b[L],C=y(g,L,_),t))if(e)$[L]=C;else if(C)switch(t){case 3:return!0;case 5:return g;case 6:return L;case 2:c.call($,g)}else if(u)return!1;return d?-1:l||u?u:$}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-29b20f0a.9f608de0.js.map